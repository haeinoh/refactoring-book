# CH03 코드에서 나는 악취

> ***리팩터링을 해야할 시점을 설명하는데 냄새라는 표현을 사용했다.***



총 24가지의 악취에 대해서 리팩터링 하는 방법을 디테일하게 한 번 정리를 해봤는데, 솔직히 잘 와닿지가 않았다. 그래서 가볍게 다시 정리해보았다. 디테일 한 부분은 [여기](https://github.com/haeinoh/refactoring-book/blob/main/ch03/README_detail.md)에 정리했다.



### # 기이한 이름 (*Mysterious Name*)

- 코드를 명료하게 표현하는 중요한 요소 : **이름**
- 함수, 모듈, 변수, 클래스 등의 이름만으로 하는 일 명확하게 파악 가능해야 함
- 이름을 바꾸기가 어렵다면 -> 설계에 근본적인 문제가 있을 수도 있음



### # 중복 코드(*Duplicated Code*)

- 한 클래스에 두 메서드가 똑같은 표현식 사용 -> 양쪽 모두 추출된 메서드 호출
- 코드가 비슷한데 완전 똑같지 않은 경우 -> 비슷한 부분 모아서 함수 추출하기 적용
- 같은 부모로부터 파생된 서브 클래스에 중복된 코드 있는 경우



### #긴 함수 (*Long Function*), 긴 매개변수 목록 (*Long Parameter List*)

- 오랜 기간 활용되는 프로그램 -> 짧은 함수 -> 이해하기 쉬움
- 주석이 필요한 부분 -> 함수, 함수 이름 -> 의도(intention)이 드러나게 짓기 (함수의 길이가 중요 X)



### # 전역 데이터 (*Global Data*)

- 전역 데이터는 우리가 겪을 수 잇는 악취 중 가장 지독한 축 (코드 베이스 어디에서든 건드릴 수 있고 누가 바꿨는지 찾아낼 메커니즘 없음) 



### # 가변 데이터 (*Mutable Data*)

- 데이터 변경시 종종 예상치 못한 결과, 버그 발생 -> 원인 알아내기 어려울 수 있음



### # 뒤엉킨 변경 (*Divergent Change*)

- 코드를 수정할 때 시스템에서 고쳐야 할 딱 한군데를 찾아서 수정할 수 없는 경우
- SRP (단일 책임 원칙)이 제대로 지켜지지 않을 때 나타남 : 하나의 모듈이 서로 다른 이유들로 인해 여러 가지 방식으로 변경되는 일이 많은 경우 발생 



### # 산탄총 수술 (*Shotgun Surgery*)

- 코드를 수정할 때 시스템에서 고쳐야 할 딱 한군데를 찾아서 수정할 수 없는 경우
- 뒤엉킨 변경과 비슷하면서도 정반대
- 코드를 변경할 때마다 자잘하게 수정해야 하는 클래스가 많은 경우



### # 기능 편애 (*Feature Envy*)

- 프로그램 모듈화 할 떄 : 코드를 여러 영역으로 나누고
  - 영역 안에서 이뤄지는 상호작용은 늘리고
  - 영역 사이에서 이뤄지는 상호작용은 최소로 줄인다  
- 기능 편애 : 어떤 함수의 상호작용 -> 자기가 속한 모듈의 함수나 데이터 < 다른 모듈의 함수나 데이터 일 때 풍기는 악취



### # 데이터 뭉치 (*Data Clumps*)

- 데이터 항목 서너 개가 여러 군데서 함께 뭉쳐있는 상태로 발견 되는 경우 -> 따로 묶기 



### # 추측성 일반화 (*Speculative Generality*)

- "나중에 필요할 거야" 라는 생각으로 당장 필요 없는 모든 종류의 후킹 포인터와 특이 케이스 처리 로직을 작성해둔 코드



### # 내부자 거래 (*Insider Trading*)

- 모듈 사이의 데이터 거래가 많으면 결합도(Coupling)이 높아짐 -> 최소로 줄여야함
- ***함수 옮기기***, ***필드 옮기기*** : 데이터를 주고받는 모듈의 사적 처리 부분 줄이기 
- ***위임 숨기기*** : 여러 모듈이 같은 관심사를 공유한다면 다른 모듈이 중간자 역할 하게 만듦
  - 또는, 공통 부분을 정식으로 처리하는 제3의 모듈 만들기
- ***서브클래스를 위임으로 바꾸기***, ***슈퍼클래스를 위임으로 바꾸기*** : 상속 구조에서 부모 자식 사이에 결탁이 생기는 경우 -> 부모 품을 떠나야할 떄



### # 거대한 클래스 (*Large Class*)

- 한 클래스 업무 과중 -> 필드 수 증가 -> 중복 코드 발생 확률 높아짐



### # 주석 (*Comments*)

- 주석은 악취가 아닌 향기를 입힘

- 하지만, 주석이 장황한 경우 -> 코드를 잘못 작성한 경우가 많음 -> 군더더기

- ***주석을 남겨야겠다는 생각이 들면, 가장 먼저 주석이 필요 없는 코드로 리팩터링 해본다***

- 무조건 하지 말라는 것은 아님 -> 현재 진행 상황, 확실하지 않은 부분에 주석 달면 좋음

  















